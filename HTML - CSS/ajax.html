<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css" />
    <link rel="shortcut icon" href="https://vignette.wikia.nocookie.net/wow/images/5/53/World-of-warcraft_logo.png/revision/latest?cb=20140427161521&path-prefix=fr"
        type="image/x-icon" />
    <title>Ajax</title>
</head>
<script>
    function chuckThat() {

        // Allez chercher blague sur API ICNDB et stockage dans variable blague

        var blague = " ";
        var url = "https://api.chucknorris.io/jokes/random";

        var xmlhttp = new XMLHttpRequest();

        xmlhttp.open("GET", url, true);
        xmlhttp.send();

        xmlhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var data = JSON.parse(this.responseText);
                blague = data.value;
                document.getElementById("result").innerText = blague;
                document.getElementById("avatar").src = data.icon_url;
            };
        }
    }

</script>

<body>
    <header>
        <h1>Ajax</h1>
    </header>
    <div id="menu">
        <section>
            <b>Menu</b>

            <p>
                <ul>
                    <li>
                        <a href="index.html" alt="Accueil">Accueil</a>
                    </li>
                    <li>
                        <a href="details.html" alt="Détails">Détails</a>
                    </li>
                    <li>
                        <a href="formulaire.html" alt="Formulaire">Formulaire</a>
                    </li>
                    <li>
                        <a href="premierjs.html" alt="Formulaire">Script JS</a>
                    </li>
                    <li>
                        <a href="newfile.html" alt="Liste Course">Liste Courses</a>
                    </li>
                    <li>
                        <a href="friends.html" alt="Friends">Friends</a>
                    </li>
                    <li>
                        <a href="ajax.html" alt="Ajax">Ajax</a>
                    </li>
                </ul>

            </p>
            <p>Site de test pour la formation POEI CapGemini de Développeur Java/J2EE concernant la partie site web et plus
                précisément HTML (HyperText Markup Language) et feuilles de style CSS (Cascade Style Sheet).
            </p>
            <br>
        </section>
    </div>

    <div id="resultat">
        <h2>Liste de Blagues</h2>
        <button id="btnblague" onclick="chuckThat()">GO</button>
        <div id="result" class="para">
            <ul id="blagues">

            </ul>
        </div>

    </div>

    <img id="avatar">
</body>

</html>